<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>HTTP 的请求与响应 | Xorex</title><meta name="keywords" content="HTTP"><meta name="author" content="Xorex"><meta name="copyright" content="Xorex"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="HTTP 协议HTTP 版本 HTTP 1.0 一次连接只能获取一个资源  HTTP 1.1 一次连接可以获取多个资源   HTTP 请求请求的结构：  请求行包括：请求方式 请求资源名称 使用协议版本。注意这里的请求资源名称里面是会包含 ?XXX&#x3D;XXX&amp;XXX&#x3D;XXX 这样的 GET 请求参数的。然后下面的请求实体会可能会包含 POST 请求参数 XXX&#x3D;XXX&amp;XXX&#x3D;XXX">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP 的请求与响应">
<meta property="og:url" content="https://xorex.space/2021/03/29/9fe744b92f15/index.html">
<meta property="og:site_name" content="Xorex">
<meta property="og:description" content="HTTP 协议HTTP 版本 HTTP 1.0 一次连接只能获取一个资源  HTTP 1.1 一次连接可以获取多个资源   HTTP 请求请求的结构：  请求行包括：请求方式 请求资源名称 使用协议版本。注意这里的请求资源名称里面是会包含 ?XXX&#x3D;XXX&amp;XXX&#x3D;XXX 这样的 GET 请求参数的。然后下面的请求实体会可能会包含 POST 请求参数 XXX&#x3D;XXX&amp;XXX&#x3D;XXX">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xorex.space/waifus/140.jpg">
<meta property="article:published_time" content="2021-03-29T05:57:37.000Z">
<meta property="article:modified_time" content="2021-04-13T08:21:55.561Z">
<meta property="article:author" content="Xorex">
<meta property="article:tag" content="HTTP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xorex.space/waifus/140.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xorex.space/2021/03/29/9fe744b92f15/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-04-13 16:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Xorex" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/Megumi.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">203</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">139</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/image/PostTop.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Xorex</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">HTTP 的请求与响应</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2021-03-29T05:57:37.000Z" title="undefined 2021-03-29 13:57">2021-03-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E7%9F%A5%E8%AF%86/">开发知识</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h2><h3 id="HTTP-版本"><a href="#HTTP-版本" class="headerlink" title="HTTP 版本"></a>HTTP 版本</h3><ol>
<li><p>HTTP 1.0 一次连接只能获取一个资源</p>
</li>
<li><p>HTTP 1.1 一次连接可以获取多个资源</p>
</li>
</ol>
<h3 id="HTTP-请求"><a href="#HTTP-请求" class="headerlink" title="HTTP 请求"></a>HTTP 请求</h3><p>请求的结构：</p>
<p><img src="https://xorex.space/image/205.jpg"></p>
<p>请求行包括：请求方式 请求资源名称 使用协议版本。注意这里的请求资源名称里面是会包含 <code>?XXX=XXX&amp;XXX=XXX</code> 这样的 GET 请求参数的。然后下面的请求实体会可能会包含 POST 请求参数 <code>XXX=XXX&amp;XXX=XXX</code> 。</p>
<p>常用请求头：</p>
<h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h4><p><code>Accept: text/html</code> 浏览器可以接受服务器回发的类型为 text/html。</p>
<p><code>Accept: */*</code> 代表浏览器可以处理所有类型,(一般浏览器发给服务器都是发这个)。</p>
<h4 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding"></a>Accept-Encoding</h4><p><code>Accept-Encoding: gzip, deflate</code> 浏览器申明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法（gzip，deflate），注意：这不是只字符编码。</p>
<h4 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h4><p><code>Accept-Language: zh-CN, zh; q=0.9</code>  浏览器申明自己接收的语言。</p>
<h4 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h4><p><code>Connection: keep-alive</code> 当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接。</p>
<p><code>Connection: close</code> 代表一个 Request 完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接会关闭， 当客户端再次发送 Request，需要重新建立 TCP 连接。</p>
<h4 id="Host（发送请求时，该报头域是必需的）"><a href="#Host（发送请求时，该报头域是必需的）" class="headerlink" title="Host（发送请求时，该报头域是必需的）"></a>Host（发送请求时，该报头域是必需的）</h4><p><code>Host: www.baidu.com</code> 请求报头域主要用于指定被请求资源的 Internet 主机和端口号，它通常从HTTP URL中提取出来的。</p>
<h4 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h4><p><code>Referer: https://www.baidu.com/?tn=62095104_8_oem_dg</code> 当浏览器向web服务器发送请求的时候，一般会带上 Referer，告诉服务器我是从哪个页面链接过来的，服务器籍此可以获得一些信息用于处理。</p>
<h4 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h4><p><code>User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36</code> 告诉HTTP服务器，客户端使用的操作系统和浏览器的名称和版本。</p>
<h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><p><code>Cache-Control: private</code> 默认为 private  响应只能够作为私有的缓存，不能再用户间共享。</p>
<p><code>Cache-Control: public</code> 响应会被缓存，并且在多用户间共享。正常情况，如果要求 HTTP 认证，响应会自动设置为 private。</p>
<p><code>Cache-Control: must-revalidate</code> 响应在特定条件下会被重用，以满足接下来的请求，但是它必须到服务器端去验证它是不是仍然是最新的。</p>
<p><code>Cache-Control: no-cache</code> 响应不会被缓存，而是实时向服务器端请求资源。</p>
<p><code>Cache-Control: max-age=10</code> 设置缓存最大的有效时间，但是这个参数定义的是时间大小（比如：60）而不是确定的时间点。单位是[秒 seconds]。</p>
<p><code>Cache-Control: no-store</code> 在任何条件下，响应都不会被缓存，并且不会被写入到客户端的磁盘里，这也是基于安全考虑的某些敏感的响应才会使用这个。</p>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><p><code>Cookie: XXXXXXXXXXXXXXXXXXXXXXXXXXXX</code> 是用来存储一些用户信息以便让服务器辨别用户身份的（大多数需要登录的网站上面会比较常见），比如 cookie 会存储一些用户的用户名和密码，当用户登录后就会在客户端产生一个 cookie 来存储相关信息，这样浏览器通过读取 cookie 的信息去服务器上验证并通过后会判定你是合法用户，从而允许查看相应网页。当然 cookie 里面的数据不仅仅是上述范围，还有很多信息可以存储是 cookie 里面，比如 sessionid 等。</p>
<h4 id="Range（用于断点续传）"><a href="#Range（用于断点续传）" class="headerlink" title="Range（用于断点续传）"></a>Range（用于断点续传）</h4><p><code>Range: bytes=0-5</code> 指定第一个字节的位置和最后一个字节的位置。用于告诉服务器自己想取对象的哪部分。</p>
<h3 id="HTTP-响应"><a href="#HTTP-响应" class="headerlink" title="HTTP 响应"></a>HTTP 响应</h3><p><img src="https://xorex.space/image/206.jpg"></p>
<p>状态行包括：通信协议 状态代码 状态信息</p>
<p>常见状态代码和状态信息：<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tags/html_ref_httpmessages.asp">响应代码和状态信息手册</a></p>
<h4 id="Cache-Control（对应请求中的Cache-Control）"><a href="#Cache-Control（对应请求中的Cache-Control）" class="headerlink" title="Cache-Control（对应请求中的Cache-Control）"></a>Cache-Control（对应请求中的Cache-Control）</h4><p><code>Cache-Control: private</code> 默认为private  响应只能够作为私有的缓存，不能再用户间共享。</p>
<p><code>Cache-Control: public</code> 浏览器和缓存服务器都可以缓存页面信息。</p>
<p><code>Cache-Control: must-revalidate</code> 对于客户机的每次请求，代理服务器必须想服务器验证缓存是否过时。</p>
<p><code>Cache-Control: no-cache</code> 浏览器和缓存服务器都不应该缓存页面信息。</p>
<p><code>Cache-Control: max-age=10</code> 是通知浏览器10秒之内不要烦我，自己从缓冲区中刷新。</p>
<p><code>Cache-Control: no-store</code> 请求和响应的信息都不应该被存储在对方的磁盘系统中。</p>
<h4 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h4><p><code>Content-Type：text/html; charset=UTF-8</code> 告诉客户端，资源文件的类型，还有字符编码，客户端通过 UTF-8 对资源进行解码，然后对资源进行 HTML 解析。通常我们会看到有些网站是乱码的，往往就是服务器端没有返回正确的编码。</p>
<h4 id="Content-Encoding"><a href="#Content-Encoding" class="headerlink" title="Content-Encoding"></a>Content-Encoding</h4><p><code>Content-Encoding: gzip</code> 告诉客户端，服务端发送的资源是采用 gzip 编码的，客户端看到这个信息后，应该采用 gzip 对资源进行解码。</p>
<h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h4><p><code>Date: Tue, 03 Apr 2018 03:52:28 GMT</code> 这个是服务端发送资源时的服务器时间，GMT 是格林尼治所在地的标准时间。HTTP 协议中发送的时间都是 GMT 的，这主要是解决在互联网上，不同时区在相互请求资源的时候，时间混乱问题。</p>
<h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p><code>Server：Tengine/1.4.6</code>  这个是服务器和相对应的版本，只是告诉客户端服务器信息。</p>
<h4 id="Transfer-Encoding"><a href="#Transfer-Encoding" class="headerlink" title="Transfer-Encoding"></a>Transfer-Encoding</h4><p><code>Transfer-Encoding：chunked</code> 这个响应头告诉客户端，服务器发送的资源的方式是分块发送的。一般分块发送的资源都是服务器动态生成的，在发送时还不知道发送资源的大小，所以采用分块发送，每一块都是独立的，独立的块都能标示自己的长度，最后一块是0长度的，当客户端读到这个0长度的块时，就可以确定资源已经传输完了。</p>
<h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><p><code>Expires: Sun, 1 Jan 2000 01:00:00 GMT</code> 这个响应头也是跟缓存有关的，告诉客户端在这个时间前，可以直接访问缓存副本，很显然这个值会存在问题，因为客户端和服务器的时间不一定会都是相同的，如果时间不同就会导致问题。所以这个响应头是没有 <code>Cache-Control：max-age=*</code> 这个响应头准确的，因为 max-age=date 中的 date 是个相对时间，不仅更好理解，也更准确。</p>
<h4 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h4><p><code>Last-Modified: Dec, 26 Dec 2015 17:30:00 GMT</code> 所请求的对象的最后修改日期(按照 RFC 7231 中定义的“超文本传输协议日期”格式来表示)</p>
<h4 id="Connection-1"><a href="#Connection-1" class="headerlink" title="Connection"></a>Connection</h4><p><code>Connection：keep-alive</code> 这个字段作为回应客户端，告诉客户端服务器的 TCP 连接也是一个长连接，客户端可以继续使用这个 TCP 连接发送 HTTP 请求。</p>
<h4 id="Etag"><a href="#Etag" class="headerlink" title="Etag"></a>Etag</h4><p><code>ETag: &quot;737060cd8c284d8af7ad3082f209582d&quot;</code> 就是一个对象（比如 URL ）的标志值，就一个对象而言，比如一个 HTML 文件，如果被修改了，其 Etag 也会别修改，所以，ETag 的作用跟 Last-Modified 的作用差不多，主要供 WEB 服务器判断一个对象是否改变了。比如前一次请求某个 HTML 文件时，获得了其 ETag，当这次又请求这个文件时，浏览器就会把先前获得 ETag 值发送给 WEB 服务器，然后 WEB 服务器会把这个 ETag 跟该文件的当前 ETag 进行对比，然后就知道这个文件有没有改变了。</p>
<h4 id="Refresh"><a href="#Refresh" class="headerlink" title="Refresh"></a>Refresh</h4><p><code>Refresh: 5; url=http://baidu.com</code> 用于重定向，或者当一个新的资源被创建时。默认会在5秒后刷新重定向。</p>
<h4 id="Access-Control-Allow-Origin"><a href="#Access-Control-Allow-Origin" class="headerlink" title="Access-Control-Allow-Origin"></a>Access-Control-Allow-Origin</h4><p><code>Access-Control-Allow-Origin: *</code> * 号代表所有网站可以跨域资源共享，如果当前字段为 * 那么 Access-Control-Allow-Credentials 就不能为 true。</p>
<p><code>Access-Control-Allow-Origin: www.baidu.com</code> 指定哪些网站可以跨域资源共享</p>
<h4 id="Access-Control-Allow-Methods"><a href="#Access-Control-Allow-Methods" class="headerlink" title="Access-Control-Allow-Methods"></a>Access-Control-Allow-Methods</h4><p><code>Access-Control-Allow-Methods：GET, POST, PUT, DELETE</code> 允许哪些方法来访问</p>
<h4 id="Access-Control-Allow-Credentials"><a href="#Access-Control-Allow-Credentials" class="headerlink" title="Access-Control-Allow-Credentials"></a>Access-Control-Allow-Credentials</h4><p><code>Access-Control-Allow-Credentials: true</code> 是否允许发送 Cookie。默认情况下，Cookie 不包括在CORS 请求之中。设为 true，即表示服务器明确许可，Cookie 可以包含在请求中，一起发给服务器。这个值也只能设为 true，如果服务器不要浏览器发送 Cookie，删除该字段即可。如果 access-control-allow-origin 为 *，当前字段就不能为 true。</p>
<h4 id="Content-Range"><a href="#Content-Range" class="headerlink" title="Content-Range"></a>Content-Range</h4><p><code>Content-Range: bytes 0-5/7877</code> 指定整个实体中的一部分的插入位置，他也指示了整个实体的长度。在服务器向客户返回一个部分响应，它必须描述响应覆盖的范围和整个实体长度。</p>
<h2 id="路径解析问题"><a href="#路径解析问题" class="headerlink" title="路径解析问题"></a>路径解析问题</h2><h3 id="base-标签"><a href="#base-标签" class="headerlink" title="base 标签"></a>base 标签</h3><p>在 HTML 种，有一个 base 标签的：<code>&lt;base herf=&quot;http://localhost:8080/WebModule/&quot;&gt;</code> 它可以定义相对路径跳转的前面部分，然后页面里面所有使用相对路径的跳转，都会加上 base 里面设置的 herf 组成一个绝对路径。</p>
<h3 id="的解析"><a href="#的解析" class="headerlink" title="/ 的解析"></a>/ 的解析</h3><p>对于服务器和客户端对相对路径的最前面的 <code>/</code> 解析是不同的，对于服务器来说这里会解析到当前 Servlet 所属的 Web 工程的目录，比如 <code>http://localhost:8080/WebModule/</code>，而对于客户端来说，会解析到当前主机的地址如 <code>http://localhost:8080/</code></p>
<h2 id="请求-HttpServletResquest"><a href="#请求-HttpServletResquest" class="headerlink" title="请求 HttpServletResquest"></a>请求 HttpServletResquest</h2><p>Tomcat 回将请求封装到 HttpServletResquest 类的实例中，并传入 service() 方法中，然后分流到 doPost() 和 doGet()。我们可以通过 HttpServletRequest 获取大量请求的相关信息。</p>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p>一般来说，互联网上发送的各种数据都是使用 <code>UTF-8</code> 来编码的，但因为 Tomcat7 及以下版本默认使用 <code>iso-8859-1</code> 来解码使用 URL 传输的文字，导致对于 Get 请求来的信息会乱码，那么为了解决这个问题，有两种方式：</p>
<ol>
<li><p>设置 Tomcat 的 URL 解码方式为 <code>UTF-8</code>，在 server.xml 里面的 HTTP/1.1 的 <code>&lt;Connector&gt;</code> 标签里面加入属性： <code>URIEncoding=&quot;UTF-8&quot;</code>。</p>
</li>
<li><p>在通过 HttpServletResquest 获取 URL 中的中文信息（GET 参数）的时候，将获取的字符串用 <code>iso-8859-1</code> 编码为原本的 <code>UTF-8</code> byte[] 信息，然后再用 <code>UTF-8</code> 编码解码这些 byte[] 为 String 即可。</p>
</li>
</ol>
<p>对于 Post 比较简单，没有 Tomcat 乱解码，无脑标注使用 UTF-8 解码就可以了：<code>request.setCharacterEncoding(&quot;UTF-8&quot;);</code></p>
<h3 id="请求信息"><a href="#请求信息" class="headerlink" title="请求信息"></a>请求信息</h3><p>getXXXX() 系列，可以获取各种请求头和 Get / Post 参数：</p>
<p>其中对于一个 name 对应多个 value 的参数，需要使用 getgetParameterValues() 获取 String[]。</p>
<h3 id="设置传递信息"><a href="#设置传递信息" class="headerlink" title="设置传递信息"></a>设置传递信息</h3><p>在进行信息转发的时候，因为整个过程传递的都是一个 HttpServletResquest 对象，所以可以在当前 Servlet 存储入一些信息，让其他的 Servlet 可以从这个对象中获取信息。</p>
<p>具体的设置方法就是使用 <code>setAttribute(Name,Value)</code> 保存信息，然后在转发到的 Servlet使用 <code>getAttribute(Name)</code> 获取保存的信息。</p>
<h2 id="响应-HttpServletResponse"><a href="#响应-HttpServletResponse" class="headerlink" title="响应 HttpServletResponse"></a>响应 HttpServletResponse</h2><h3 id="编码-1"><a href="#编码-1" class="headerlink" title="编码"></a>编码</h3><p>首先对于要操作 HttpServletResponse 之前，先设置好编码：</p>
<ol>
<li><p>无脑推荐版本：使用 <code>setContentType(&quot;UTF-8&quot;)</code> 来设置。这个方法不仅设置了输出信息使用 UTF-8 编码，还自动会添加响应头 <code>Content-Type: text/html; charset=UTF-8</code> ，一步解决全部问题。</p>
</li>
<li><p>自己手动全部设置：先设置信息编码格式： <code>setCharactorEncoding(&quot;UTF-8&quot;)</code> 然后设置响应头：<code>setHeader(&quot;Content-Type&quot;,&quot;text/html; charset=UTF-8&quot;)</code> 这个比较麻烦，还是无脑用第一个吧。</p>
</li>
</ol>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>用一堆 set 方法设置响应头以外，就是输出响应体了。</p>
<p>响应体有两种方式：<code>getWriter()</code> <code>getOutputStream()</code> 获取 Write 实例和 OutputStream 实例来写响应体。</p>
<p>对于字符，可以使用 Write 来写，对于非字符（二进制文件）使用 OutputStream 来写。但是一定要注意的的是，这两个东西，只能同时持有一个实例，如果要用另一个，就需要 <code>close()</code> 关闭资源才可以。</p>
<p>这是因为如果同时持有两个输出实例，那么两者的输出合并就会成为一个大问题，所以为了避免混乱，就设计成两者互斥，只能同时持有一个输出实例。</p>
<h3 id="请求重定向"><a href="#请求重定向" class="headerlink" title="请求重定向"></a>请求重定向</h3><ol>
<li><p>无脑推荐： <code>sendRedirect(/XXX/XX)</code> 里面填入重定向页面。（会自动设置响应代码和重定向响应头）</p>
</li>
<li><p>自己手动设置响应代码和重定向头： <code>setStatus(302)</code> <code>setHeader(&quot;Location&quot;,&quot;XXX/XX&quot;)</code></p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Xorex</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://xorex.space/2021/03/29/9fe744b92f15/">https://xorex.space/2021/03/29/9fe744b92f15/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://xorex.space" target="_blank">Xorex</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HTTP/">HTTP</a></div><div class="post_share"><div class="social-share" data-image="/waifus/140.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/30/34a1ace02353/"><img class="prev-cover" src="/waifus/141.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ClassPath 和 getResourceAsStream()</div></div></a></div><div class="next-post pull-right"><a href="/2021/03/28/1febb3ac708c/"><img class="next-cover" src="/waifus/139.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Servlet 开发基础</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC8yODcyMS81Mjky"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/Megumi.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Xorex</div><div class="author-info__description">要成为世界上最幸福的人啊！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">203</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">139</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Administrator-Xorex"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Administrator-Xorex" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://tool.gljlw.com/qq/?qq=2676424606" target="_blank" title="添加好友"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:cloudloverain@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/65831075" target="_blank" title="bilibili"><i class="fas fa-tv"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.</span> <span class="toc-text">HTTP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E7%89%88%E6%9C%AC"><span class="toc-number">1.1.</span> <span class="toc-text">HTTP 版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">HTTP 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept"><span class="toc-number">1.2.1.</span> <span class="toc-text">Accept</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept-Encoding"><span class="toc-number">1.2.2.</span> <span class="toc-text">Accept-Encoding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept-Language"><span class="toc-number">1.2.3.</span> <span class="toc-text">Accept-Language</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Connection"><span class="toc-number">1.2.4.</span> <span class="toc-text">Connection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Host%EF%BC%88%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E6%97%B6%EF%BC%8C%E8%AF%A5%E6%8A%A5%E5%A4%B4%E5%9F%9F%E6%98%AF%E5%BF%85%E9%9C%80%E7%9A%84%EF%BC%89"><span class="toc-number">1.2.5.</span> <span class="toc-text">Host（发送请求时，该报头域是必需的）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Referer"><span class="toc-number">1.2.6.</span> <span class="toc-text">Referer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#User-Agent"><span class="toc-number">1.2.7.</span> <span class="toc-text">User-Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cache-Control"><span class="toc-number">1.2.8.</span> <span class="toc-text">Cache-Control</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie"><span class="toc-number">1.2.9.</span> <span class="toc-text">Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Range%EF%BC%88%E7%94%A8%E4%BA%8E%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%EF%BC%89"><span class="toc-number">1.2.10.</span> <span class="toc-text">Range（用于断点续传）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E5%93%8D%E5%BA%94"><span class="toc-number">1.3.</span> <span class="toc-text">HTTP 响应</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cache-Control%EF%BC%88%E5%AF%B9%E5%BA%94%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84Cache-Control%EF%BC%89"><span class="toc-number">1.3.1.</span> <span class="toc-text">Cache-Control（对应请求中的Cache-Control）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Type"><span class="toc-number">1.3.2.</span> <span class="toc-text">Content-Type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Encoding"><span class="toc-number">1.3.3.</span> <span class="toc-text">Content-Encoding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Date"><span class="toc-number">1.3.4.</span> <span class="toc-text">Date</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Server"><span class="toc-number">1.3.5.</span> <span class="toc-text">Server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Transfer-Encoding"><span class="toc-number">1.3.6.</span> <span class="toc-text">Transfer-Encoding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Expires"><span class="toc-number">1.3.7.</span> <span class="toc-text">Expires</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Last-Modified"><span class="toc-number">1.3.8.</span> <span class="toc-text">Last-Modified</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Connection-1"><span class="toc-number">1.3.9.</span> <span class="toc-text">Connection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Etag"><span class="toc-number">1.3.10.</span> <span class="toc-text">Etag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Refresh"><span class="toc-number">1.3.11.</span> <span class="toc-text">Refresh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Access-Control-Allow-Origin"><span class="toc-number">1.3.12.</span> <span class="toc-text">Access-Control-Allow-Origin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Access-Control-Allow-Methods"><span class="toc-number">1.3.13.</span> <span class="toc-text">Access-Control-Allow-Methods</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Access-Control-Allow-Credentials"><span class="toc-number">1.3.14.</span> <span class="toc-text">Access-Control-Allow-Credentials</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Range"><span class="toc-number">1.3.15.</span> <span class="toc-text">Content-Range</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E8%A7%A3%E6%9E%90%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">路径解析问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#base-%E6%A0%87%E7%AD%BE"><span class="toc-number">2.1.</span> <span class="toc-text">base 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text">&#x2F; 的解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82-HttpServletResquest"><span class="toc-number">3.</span> <span class="toc-text">请求 HttpServletResquest</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81"><span class="toc-number">3.1.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF"><span class="toc-number">3.2.</span> <span class="toc-text">请求信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%BC%A0%E9%80%92%E4%BF%A1%E6%81%AF"><span class="toc-number">3.3.</span> <span class="toc-text">设置传递信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94-HttpServletResponse"><span class="toc-number">4.</span> <span class="toc-text">响应 HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81-1"><span class="toc-number">4.1.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">4.2.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.3.</span> <span class="toc-text">请求重定向</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2021 By Xorex</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="Xorex" data-fontsize="18px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>